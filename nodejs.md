## 10

## 1. node 中 cluster 是怎样开启多进程的，并且一个端口可以被多个进程监听吗

通过调用 cluster.fork() 这个方法来创建多进程，最终还是调用了 child_process.fork() 这个方法。
可以被多个进程监听，但是实际上仅 Master 进程对端口进行了监听。主进程和子进程在建立 IPC 通信之后，发送 Socket 到子进程实现端口共享，在之后 Master 接收到新的客户端链接之后，通过负载均衡技术再转发到各 Worker 进程。
Master 进程创建一个 Socket 并绑定监听到该目标端口，通过与子进程之间建立 IPC 通道之后，通过调用子进程的 send 方法，将 Socket（链接句柄）传递过去。
常见的进程间通信就是：pipe（管道）、消息队列、信号量、Domain Socket ，在 Nodejs 中是通过 pipe（管道）实现的，pipe 作用于之间有血缘关系的进程，通过 fork 传递，其本身也是一个进程，将一个进程的输出做为另外一个进程的输入，常见的 Linux 所提供的管道符 “|” 就是将两个命令隔开,管道符左边命令的输出就会作为管道符右边命令的输入。
